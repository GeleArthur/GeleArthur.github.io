import{_ as a,c as i,o as e,ae as n}from"./chunks/framework.tuuL-SzM.js";const o=JSON.parse('{"title":"You forgot CMake again","description":"","frontmatter":{},"headers":[],"relativePath":"blog/you-forgot-cmake-again.md","filePath":"blog/you-forgot-cmake-again.md","lastUpdated":1745709155000}'),t={name:"blog/you-forgot-cmake-again.md"};function l(h,s,p,k,r,d){return e(),i("div",null,s[0]||(s[0]=[n(`<h1 id="you-forgot-cmake-again" tabindex="-1">You forgot CMake again <a class="header-anchor" href="#you-forgot-cmake-again" aria-label="Permalink to &quot;You forgot CMake again&quot;">​</a></h1><p>This is a list of handy cmake snippets. For me and YOU!!!</p><p>All <code>\${PROJECT\\_NAME}</code> means your target.</p><h1 id="create-project" tabindex="-1">Create project <a class="header-anchor" href="#create-project" aria-label="Permalink to &quot;Create project&quot;">​</a></h1><div class="language-cmake vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cmake</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">cmake_minimum_required</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">VERSION</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 3.29)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">project</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MyProject </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">VERSION</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 1.0 LANGUAGES CXX)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">add_executable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">\${PROJECT_NAME}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    main.cpp</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h1 id="cpp-version" tabindex="-1">Cpp version <a class="header-anchor" href="#cpp-version" aria-label="Permalink to &quot;Cpp version&quot;">​</a></h1><div class="language-cmake vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cmake</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Global</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CMAKE_CXX_STANDARD 20)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CMAKE_CXX_STANDARD_REQUIRED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TRUE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Target</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">target_compile_features</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">\${PROJECT_NAME}</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PRIVATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cxx_std_20)</span></span></code></pre></div><h1 id="vcpkg" tabindex="-1">VCPKG <a class="header-anchor" href="#vcpkg" aria-label="Permalink to &quot;VCPKG&quot;">​</a></h1><div class="language-cmake vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cmake</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">include</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;$ENV{VCPKG_ROOT}/scripts/buildsystems/vcpkg.cmake&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h1 id="show-resources-in-ide" tabindex="-1">Show resources in IDE <a class="header-anchor" href="#show-resources-in-ide" aria-label="Permalink to &quot;Show resources in IDE&quot;">​</a></h1><div class="language-cmake vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cmake</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(GLOB_RECURSE RESOURCE_FILES </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;\${CMAKE_CURRENT_SOURCE_DIR}/resources/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">add_custom_target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Resources ALL </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SOURCES</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> \${RESOURCE_FILES}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h1 id="msvc-default-project-only-for-sln-files" tabindex="-1">MSVC default project. Only for .sln files <a class="header-anchor" href="#msvc-default-project-only-for-sln-files" aria-label="Permalink to &quot;MSVC default project. Only for .sln files&quot;">​</a></h1><div class="language-cmake vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cmake</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set_property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(DIRECTORY </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">\${CMAKE_CURRENT_SOURCE_DIR}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PROPERTY VS_STARTUP_PROJECT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">\${PROJECT_NAME}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h1 id="create-symlink" tabindex="-1">Create symlink <a class="header-anchor" href="#create-symlink" aria-label="Permalink to &quot;Create symlink&quot;">​</a></h1><div class="language-cmake vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cmake</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">add_custom_command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TARGET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> \${PROJECT_NAME}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> POST_BUILD</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        COMMAND</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> \${CMAKE_COMMAND}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> -E create_symlink</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;\${CMAKE_CURRENT_SOURCE_DIR}/resources&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;$&lt;TARGET_FILE_DIR:\${PROJECT_NAME}&gt;/resources&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h1 id="copy-files" tabindex="-1">Copy files <a class="header-anchor" href="#copy-files" aria-label="Permalink to &quot;Copy files&quot;">​</a></h1><div class="language-cmake vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cmake</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(GLOB_RECURSE RESOURCE_FILES </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;\${CMAKE_CURRENT_SOURCE_DIR}/resources/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">foreach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RESOURCE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> \${RESOURCE_FILES}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    add_custom_command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TARGET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> \${PROJECT_NAME}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> POST_BUILD</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    COMMAND</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> \${CMAKE_COMMAND}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> -E copy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">\${RESOURCE}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;\${CMAKE_CURRENT_BINARY_DIR}/resources/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">endforeach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RESOURCE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">add_custom_command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TARGET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> \${PROJECT_NAME}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> POST_BUILD</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  COMMAND</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;\${CMAKE_COMMAND}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> -E copy_directory </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;\${CMAKE_CURRENT_SOURCE_DIR}/Data&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;$&lt;TARGET_FILE_DIR:\${PROJECT_NAME}&gt;/Data&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h1 id="fetch-content" tabindex="-1">Fetch Content <a class="header-anchor" href="#fetch-content" aria-label="Permalink to &quot;Fetch Content&quot;">​</a></h1><p>When **configuring **the project download the required data.<br> Warning in the docs look at external project for the commands as they are the same</p><div class="language-cmake vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cmake</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">include</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(FetchContent)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FetchContent_Declare(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  SDL3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  GIT_REPOSITORY https://github.com/libsdl-org/SDL.git</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  GIT_TAG release-3.2.4</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  GIT_SHALLOW </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TRUE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  GIT_PROGRESS </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TRUE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FetchContent_MakeAvailable(SDL3)</span></span></code></pre></div><h1 id="link-to-library" tabindex="-1">Link to library <a class="header-anchor" href="#link-to-library" aria-label="Permalink to &quot;Link to library&quot;">​</a></h1><div class="language-cmake vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cmake</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">target_link_libraries</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">\${PROJECT_NAME}</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PUBLIC</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SDL3::SDL3            </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h1 id="external-project" tabindex="-1">External Project <a class="header-anchor" href="#external-project" aria-label="Permalink to &quot;External Project&quot;">​</a></h1><p>When the project **builds **download the required data</p><div class="language-cmake vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cmake</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">include</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ExternalProject)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ExternalProject_Add(foobar</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  GIT_REPOSITORY    git@github.com:FooCo/FooBar.git</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  GIT_TAG           origin/release/1.2.3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h1 id="auto-gitignore-build-folder" tabindex="-1">Auto gitignore build folder <a class="header-anchor" href="#auto-gitignore-build-folder" aria-label="Permalink to &quot;Auto gitignore build folder&quot;">​</a></h1><div class="language-cmake vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cmake</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(WRITE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">\${CMAKE_CURRENT_BINARY_DIR}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/.gitignore *)</span></span></code></pre></div><h1 id="turn-on-all-warnings" tabindex="-1">Turn on all warnings <a class="header-anchor" href="#turn-on-all-warnings" aria-label="Permalink to &quot;Turn on all warnings&quot;">​</a></h1><div class="language-cmake vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cmake</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">target_compile_options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">\${PROJECT_NAME}</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PRIVATE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $&lt;$&lt;CXX_COMPILER_ID:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MSVC</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;:/W4 /WX&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $&lt;$&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:$&lt;CXX_COMPILER_ID:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MSVC</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;:-Wall -Wextra -Wpedantic -Werror&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h1 id="commands" tabindex="-1">Commands <a class="header-anchor" href="#commands" aria-label="Permalink to &quot;Commands&quot;">​</a></h1><h2 id="make-project" tabindex="-1">Make project <a class="header-anchor" href="#make-project" aria-label="Permalink to &quot;Make project&quot;">​</a></h2><div class="language-cmake vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cmake</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mkdir build</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cd build</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cmake ..</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cmake --build .</span></span></code></pre></div><h2 id="check-settings" tabindex="-1">Check settings <a class="header-anchor" href="#check-settings" aria-label="Permalink to &quot;Check settings&quot;">​</a></h2><p><code>cmake -L</code><br><code>cmake -LH</code></p><h2 id="build-type" tabindex="-1">Build type <a class="header-anchor" href="#build-type" aria-label="Permalink to &quot;Build type&quot;">​</a></h2><p><code>-DCMAKE\\_BUILD\\_TYPE=</code> Release, RelWithDebInfo, Debug</p><h2 id="you-forgot-git-submodules" tabindex="-1">You forgot git submodules <a class="header-anchor" href="#you-forgot-git-submodules" aria-label="Permalink to &quot;You forgot git submodules&quot;">​</a></h2><p><code>git submodule update —init —recursive</code></p>`,38)]))}const c=a(t,[["render",l]]);export{o as __pageData,c as default};
